---
{"title":"07-多文件编辑","note_type":"knowledge_base","description":null,"tags":["开发工具","neovim"],"create_time":"2024-08-13","update_time":"2025-02-19","dg-home":false,"dg-publish":true,"aliase":[],"root":"neovim 使用说明","permalink":"/04-知识仓库/知识单元/03-通用技术/neovim 使用说明/07-多文件编辑/","dgPassFrontmatter":true,"noteIcon":"","created":"2024-08-13","updated":"2025-02-19"}
---


所属知识库：[[04-知识仓库/归纳目录/03-通用技术/neovim 使用说明\|neovim 使用说明]]

### 打开多个文件

```bash
nvim one.c tow.c three.c
```

不同文件之间切换可以通过 `:next` 指令执行

如果没有保存，就执行 `:next` 或抛出异常，并且不切换文件，解决方案有：

1. `:next!` 强制切换文档，不保存现有修改
2. `:wnext` 先执行保存，然后再切换

可以通过 `:args` 查询当前文件是哪一个，也可以通过 `:args filelist …` 重新打开文件列表

**其他的切换指令：**

1. `:previous` 向前切换
2. `:wprevious` 保存后向前切换
3. `:last` 最后一个文件
4. `:first` 第一个文件
5. `:<number>next` 向后切换 n 个

### 自动保存

```vimscript
:set autowrite
:set noautowrite
```

### 文件间跳转

1. `CTRL-^` 可以快速的在两个文件跳转
2. `ˋ"` 可以在切换文件之后快速跳转到切换前的位置
3. `ˋ.` 可以在切换文件之后快速跳转到最后一次保存的位置
4. `CTRL-O` 和 `CTRL-I` 在老文件和新文件之间跳转

### 文件标记

之前标记文章中的位置使用 `mx`，通过 `ˋx` 跳转到记录的位置，然而这样的标记列表对于每个文件是独立，如果想要跨文件标记那么可以使用 `mX`，使用大写的标记，这些标记符号是全局的，通过 `ˋX` 可以跳转到指定文件的指定位置。

除了直接标记指定位置，还有以下的标记方法

1. `50%mF` 标记当前文档 50% 位置的地方，符号为 F
2. `GmB` 标记当前文档尾部位置，符号为 B

### 备份文件

```vimscript
:set backup
```

开启文件备份，备份文件的名称是原始文件，末尾添加了一个 `~`。例如，如果文件名为 `data.txt`，则备份文件名为 `data.txt~`。如果你不喜欢备份文件以 `~`

```vimscript
:set backupext=.bak
:set backupdir=~/
```

### 补丁模式

```vimscript
:set patchmode=.orig
```

备份模式只会保存前一份的文档，如果想要保留最初的文档则需要启动 `patchmode` 这样会使最初的文档以 `filename.orig` 的名称存在相同目录。

### 跨文件复制粘贴

与在一个文件复制粘贴的命令一致，使用 `y` 复制指定内容，`p` 粘贴到指定位置

但是跨文件复制粘贴有一个问题便是来回的切换文件会比较复杂，所以这里使用了类似剪贴板历史记录一类的注册机制，可以将复制的内容与标签一一对应，通过 `"` 指令，例如：

1. `"fyas` 使用 `"` 表示使用注册机制，`f` 表示注册的符号，`yas` 是全部复制的指令，这样就把当前文档复制到 `f` 这个符号里了；
2. `"l3yy` 同理将 `3yy` 复制的内容注册到 `l` 符号中

粘贴的话则需要使用 `"<mark>p` 即可，将复制内容粘贴到指定位置。

### 另存为

```vimscript
:saveas newname
```

这样在下次执行 `:w` 时，将会把文件保存到新的文件中去
