---
{"title":"10-云原生架构","note_type":"knowledge_base","description":"选择案例论文 云原生架构七大原则、主要架构模式、云原生架构反模式","tags":["软考","系统架构设计师"],"create_time":"2024-08-26","update_time":"2025-02-19","dg-home":false,"dg-publish":true,"aliase":null,"knowledge_type":"学习笔记","root":"系统架构设计师学习笔记","permalink":"/04-知识仓库/知识单元/05-学习笔记/系统架构设计师学习笔记/10-云原生架构/","dgPassFrontmatter":true,"noteIcon":"","created":"2024-08-26","updated":"2025-02-19"}
---


所属知识库：[[04-知识仓库/归纳目录/05-学习笔记/系统架构设计师学习笔记\|系统架构设计师学习笔记]]

## 1 概述

本章只会在案例，论文中着重考察。特别是云原生架构的特征，主流的架构模式，反模式的意义等需要熟记熟背，不排除直接在案例中进行考察。

云原生主题涉及到具体技术众多，也是历年论文考察的重点。2020 年考察过《论云原生架构及其应及应用》，2017 年考察过《论无服务器架构及其应用》2016 年考察过《论微服务架构及其应用》，2024 年考察过《论云上自动化运维及其应用》

**云原生架构七大原则**：
- **服务化原则**：当项目规模较大时需要进行服务化拆分，如微服务或小服务架构。服务化可以提高复用性，并方便对服务进行流量控制和治理。
- **弹性原则**：系统应具备自动伸缩能力，根据业务需求调整资源。这可以缩短上线时间、降低成本，并应对突发的业务扩张需求。
- **可观测性原则**：在分布式环境下需要更强的可观测性，包括日志、链路跟踪、指标等可以帮助运维、开发和业务人员实时掌握系统运行状态并进行优化。
- **韧性原则**：系统需具备抵御各种硬件和软件异常的能力，提升平均无故障时间包括异步化、限流、降级、高可用等多维度的架构设计全流程自动化原则。
- **全流程自动化原则**：利用自动化工具实现交付流程的标准化和自动化提高交付效率，并减少人工操作带来的风险。
- **零信任原则**：不再依赖网络边界的安全思路，转向基于身份的访问控制。解决研发、测试、运维等场景下的隔离和访问控制问题。
- **持续演进原则**：架构需具备持续演进的能力，应对技术和业务的快速变化。需要考虑遗留应用的迁移成本和风险，采取渐进式的架构演进策略。

**主要架构模式**：
- **服务化架构模式**：以应用模块为颗粒度将软件拆分，使用接口契约和标准协议实现模块之间的互联互通。结合 DDD、TDD 和容器化部署提升代码质量和迭代速度。典型模式包括微服务和小服务模
- **Mesh 化架构模式**：将中间件从业务进程中分离，在业务进程中只保留"薄"的客户端部分。由 Mesh 进程处理分布式架构模式如熔断、限流等，提供更好的安全性、环境隔离和测试能
- **Serverless 架构**：将应用部署从运维中"收走"，云负责处理请求/事件调度业务进程，适用于事件驱动的计算任务、短请求/响应应用等。
- **存储计算分离模式**：无状态应用可以获得更好的弹性，推荐使用云服务存储各类数据，对于性能敏感的状态可采用时间日志+快照的方式。
- **分布式事务模式**：微服务使用私有数据源会导致分布式事务问题，架构师需根据场景选择合适的分布式事务模式如 XA、BASE、TCC 等。
- **可观测架构**：包括日志、链路跟踪和指标监控，需要选择合适的开源框架并规范可观测数据，目标是为服务 SLO 度量提供依据。
- **事件驱动架构**：事件具有 Schema，可校验有效性并提供 QoS 保障，可应用于服务解耦、CQRS、数据变化通知等场景适用于大量事件流处理和基于事件触发的响应。

**云原生架构反模式**：
- **庞大的单体应用**：问题在于缺乏依赖隔离，包括代码耦合、模块间接口缺乏治理、不同模块开发发布进度难以协调、单个模块不稳定影响整个应用等。解决方案是通过服务化进行适度拆分，梳理聚合根，明确服务模块边界和模块间接口定义，让组织关系和架构关系匹配。
- **单体应用"硬拆"为微服务**：过度服务化拆分会导致新架构与组织能力不匹配，影响架构升级效果。典型问题包括小规模软件过度拆分、服务间数据依赖、服务拆分导致性能下降等。
- **缺乏自动化能力的微服务**：随着软件规模增大，人工处理开发测试运维等会导致交付时间变长、风险提升、运维成本增加等问题。需要建立完善的自动化能力，包括自动化测试、发布、环境管理等，以应对复杂度的提升。

## 2 架构案例

![IMG-D46BB2999A32FDA9DC6F4FFB464CACBC.png](/img/user/00-%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3%E9%99%84%E4%BB%B6/04-%E7%9F%A5%E8%AF%86%E4%BB%93%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%8D%95%E5%85%83/05-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%9E%B6%E6%9E%84-%E9%99%84%E4%BB%B6/IMG-D46BB2999A32FDA9DC6F4FFB464CACBC.png)

![IMG-FE9F4FF75CB9F9B174E316ACA1EE1A68.png](/img/user/00-%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3%E9%99%84%E4%BB%B6/04-%E7%9F%A5%E8%AF%86%E4%BB%93%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%8D%95%E5%85%83/05-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%9E%B6%E6%9E%84-%E9%99%84%E4%BB%B6/IMG-FE9F4FF75CB9F9B174E316ACA1EE1A68.png)

![IMG-B2787E6A38FA21005FC71E7B3E5FA235.png](/img/user/00-%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3%E9%99%84%E4%BB%B6/04-%E7%9F%A5%E8%AF%86%E4%BB%93%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%8D%95%E5%85%83/05-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%9E%B6%E6%9E%84-%E9%99%84%E4%BB%B6/IMG-B2787E6A38FA21005FC71E7B3E5FA235.png)

![IMG-0E6B3830CDF441A3692FB0F90CF0EE36.png](/img/user/00-%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3%E9%99%84%E4%BB%B6/04-%E7%9F%A5%E8%AF%86%E4%BB%93%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%8D%95%E5%85%83/05-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%9E%B6%E6%9E%84-%E9%99%84%E4%BB%B6/IMG-0E6B3830CDF441A3692FB0F90CF0EE36.png)

![IMG-29B8FD41D4D519B5B41AB95A3815E72F.png](/img/user/00-%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3%E9%99%84%E4%BB%B6/04-%E7%9F%A5%E8%AF%86%E4%BB%93%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%8D%95%E5%85%83/05-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/10-%E4%BA%91%E5%8E%9F%E7%94%9F%E6%9E%B6%E6%9E%84-%E9%99%84%E4%BB%B6/IMG-29B8FD41D4D519B5B41AB95A3815E72F.png)
